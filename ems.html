<!DOCTYPE html> 
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚°ì•…êµ¬ì¡°&ë³‘ì› ê³µìœ </title>
    <!-- Inter í°íŠ¸ì™€ Tailwind CSS ë¡œë”© -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .form-container {
            max-width: 800px;
            margin: 2rem auto;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        input, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            transition: border-color 0.2s ease-in-out;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

<div class="form-container bg-white p-8 rounded-2xl shadow-xl">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">ì‚°ì•…êµ¬ì¡°&ë³‘ì› ê³µìœ </h1>
    <p class="text-center text-gray-500 mb-8">ì‚°ì•…êµ¬ì¡°&ë³‘ì› ìƒí™©ê³µìœ  ë‚´ìš©ì„ ê¸°ë¡í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.</p>

    <form id="recordForm">
        <div class="grid md:grid-cols-2 gap-6 mb-6">
            <!-- í™˜ì ì •ë³´ -->
            <div>
                <h2 class="text-xl font-semibold text-gray-700 mb-4">í™˜ì ì •ë³´</h2>
                <div class="mb-4">
                    <label for="patientName" class="text-gray-600">í™˜ì ì´ë¦„</label>
                    <input type="text" id="patientName" name="patientName" placeholder="í™˜ì ì´ë¦„" required class="rounded-lg">
                </div>
                <div>
                    <label for="dob" class="text-gray-600">ìƒë…„ì›”ì¼</label>
                    <input type="date" id="dob" name="dob" required class="rounded-lg">
              </div>             
            </div>

            <!-- ìƒí™© ì •ë³´ -->
            <div>
                <h2 class="text-xl font-semibold text-gray-700 mb-4">ìƒí™© ì •ë³´</h2>
                <div class="mb-4">
                    <label for="incidentTime" class="text-gray-600">ë°œìƒ ì‹œê°„</label>
                    <input type="datetime-local" id="incidentTime" name="incidentTime" required class="rounded-lg">
                </div>
                <div class="mb-4">
                    <label for="location" class="text-gray-600">ì¥ì†Œ</label>
                    <input type="text" id="location" name="location" placeholder="ì˜ˆ: OOë™ 123-45" required class="rounded-lg">
                </div>
                <div>
                    <label for="chiefComplaint" class="text-gray-600">ì£¼ ì¦ìƒ</label>
                    <input type="text" id="chiefComplaint" name="chiefComplaint" placeholder="ì˜ˆ: í˜¸í¡ê³¤ë€, ê°€ìŠ´ í†µì¦" required class="rounded-lg">
                </div>
            </div>
        </div>

        <!-- ì˜ë£Œì§€ë„ ë‚´ìš© -->
        <div class="mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">ë³‘ì›ì „ë‹¬ ë‚´ìš©</h2>
            <div class="mb-4">
                <label for="doctorName" class="text-gray-600">ì´ì†¡ ë³‘ì›</label>
                <input type="text" id="doctorName" name="doctorName" placeholder="ë³‘ì›ì´ë¦„" required class="rounded-lg">
            </div>
            <div>
                <label for="guidanceContent" class="text-gray-600">ì „ë‹¬ ë‚´ìš©</label>
                <textarea id="guidanceContent" name="guidanceContent" rows="4" placeholder="ë³‘ì›ì¸ê³„ ì‚¬í•­: ë°œìƒê¸°ì „/ì†ìƒ/ì§•í›„/í˜„ì¥ì²˜ì¹˜/ìƒíƒœ/ê³¼ê±°ë ¥/í™œë ¥ì§•í›„" required class="rounded-lg"></textarea>
            </div>
        </div>

        <!-- ê¸°ë¡ì ì •ë³´ -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">ê¸°ë¡ì</h2>
            <div>
                <label for="emtName" class="text-gray-600">ì‘ê¸‰êµ¬ì¡°ì‚¬ ì´ë¦„</label>
                <input type="text" id="emtName" name="emtName" placeholder="ì‘ê¸‰êµ¬ì¡°ì‚¬ ì„±ëª…" required class="rounded-lg">
            </div>
        </div>

        <!-- ì €ì¥ ë²„íŠ¼ -->
        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
            ê¸°ë¡ ì €ì¥í•˜ê¸°
        </button>

        <!-- ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ë²„íŠ¼ -->
        <a href="https://open.kakao.com/o/xxxxxxx" target="_blank" 
           class="block w-full mt-4 bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-4 rounded-lg text-center transition duration-200">
            ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ…ë°© ì°¸ì—¬í•˜ê¸°
        </a>

        <!-- ê²°ê³¼ ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ -->
        <div id="resultMessage" class="mt-4 text-center"></div>
    </form>
</div>

<script>
    // ì´ URLì„ Google Apps Scriptë¥¼ ì›¹ ì•±ìœ¼ë¡œ ê²Œì‹œí•œ í›„ ì–»ì€ URLë¡œ ë°”ê¿”ì£¼ì„¸ìš”.
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyI4VZUHL5QYFVgGS15epiPYs-0z8DMZIOmvNNnYx_5EsggSx8n6-44zprKS2Quf9JNLA/exec'; 

    const form = document.getElementById('recordForm');
    const resultMessage = document.getElementById('resultMessage');

    form.addEventListener('submit', async function(event) {
        event.preventDefault(); // í¼ ì œì¶œ ê¸°ë³¸ ë™ì‘ ë°©ì§€

        resultMessage.textContent = 'ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...';
        resultMessage.className = 'mt-4 text-center text-gray-500';

        // í¼ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜
        const formData = {
            patientName: form.patientName.value,
            dob: form.dob.value,
            incidentTime: form.incidentTime.value,
            location: form.location.value,
            chiefComplaint: form.chiefComplaint.value,
            doctorName: form.doctorName.value,
            guidanceContent: form.guidanceContent.value,
            emtName: form.emtName.value,
            timestamp: new Date().toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' })
        };

        try {
            const response = await fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // CORS ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•´ no-cors ëª¨ë“œ ì‚¬ìš©
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            // no-cors ëª¨ë“œëŠ” ì‘ë‹µ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë©”ì‹œì§€ë¥¼ ê¸ì •ì ìœ¼ë¡œ í‘œì‹œ
            resultMessage.textContent = 'âœ… ê¸°ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!';
            resultMessage.className = 'mt-4 text-center text-green-600 font-medium';
            form.reset(); // í¼ ì´ˆê¸°í™”

        } catch (error) {
            console.error('Error:', error);
            resultMessage.textContent = 'ğŸš¨ ê¸°ë¡ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
            resultMessage.className = 'mt-4 text-center text-red-600 font-medium';
        }
    });
</script>

</body>
</html>
