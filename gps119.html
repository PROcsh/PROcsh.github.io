<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ†˜ ì‚°ì•…ì‚¬ê³  ìœ„ì¹˜íŒŒì•…</title>

<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424&libraries=services"></script>

<style>
/* ================= ê³µí†µ ================= */
body {
  font-family: Arial, sans-serif;
  padding: 16px;
  padding-bottom: 120px;
  background: #f4f6f8;
  color: #111;
}
h1, h2, h4 { text-align: center; }

/* ğŸ”¥ ë²„íŠ¼Â·ì…ë ¥ì°½ ì™„ì „ í†µì¼ */
.ui-control {
  width: 100%;
  height: 64px;
  box-sizing: border-box;
  font-size: 1.3rem;
  padding: 16px;
  margin: 10px 0;
  border-radius: 16px;
  font-weight: bold;
}

/* ë²„íŠ¼ */
button.ui-control {
  border: none;
  background: #2DB400;
  color: #ffffff;
}

/* ì…ë ¥ì°½ */
input.ui-control {
  border: 3px solid #2DB400;
  background: #ffffff;
}

/* ì¢Œí‘œ ë°•ìŠ¤ */
.box {
  background: #ffffff;
  border-radius: 16px;
  padding: 24px;
  margin-top: 12px;
  text-align: center;
  font-size: 1.5rem;
  font-weight: 800;
}

/* ì•ˆë‚´ */
.guide {
  margin-top: 16px;
  padding: 16px;
  background: #e8f5e9;
  border-left: 6px solid #2DB400;
  border-radius: 12px;
  font-size: 15px;
}

/* ì§€ë„ */
.map {
  width: 100%;
  height: 280px;
  margin-top: 12px;
  border-radius: 16px;
}

/* í•˜ë‹¨ ê³ ì • */
.bottom-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 90%;
  padding: 14px;
  background: #2DB400;
}

/* ================= ğŸŒ™ ë‹¤í¬ëª¨ë“œ ================= */
@media (prefers-color-scheme: dark) {
  body {
    background: #020617;
    color: #e5e7eb;
  }

  button.ui-control {
    background: #22c55e;
    color: #022c22;
  }

  input.ui-control {
    background: #020617;
    color: #f8fafc;
    border-color: #22c55e;
  }

  .box {
    background: #020617;
    color: #f8fafc;
  }

  .guide {
    background: #052e16;
    border-left-color: #22c55e;
    color: #dcfce7;
  }

  .map {
    filter: brightness(0.85) contrast(1.05);
  }

  .bottom-fixed {
    background: #022c22;
  }
}
</style>
</head>

<body>

<h4>[ ë¬´ë“±ì‚°êµ­ë¦½ê³µì› - êµ¬ì¡°ëŒ€ ]</h4>
<h1>ğŸ†˜ ì‚°ì•…ì‚¬ê³  ìœ„ì¹˜íŒŒì•…</h1>

<button id="getLocation" class="ui-control">ğŸ“ ë‚´ ìœ„ì¹˜ í™•ì¸</button>

<div class="box" id="coord">ìœ„ì¹˜ ë¯¸í™•ì¸</div>

<div class="guide">
âœ” ë‚´ ìœ„ì¹˜ í™•ì¸<br>
âœ” ìš”êµ¬ì¡°ì ìœ„Â·ê²½ë„ ì…ë ¥<br>
âœ” ëŒ€ìƒ ìœ„ì¹˜ ì§€ë„ í‘œì‹œ<br>
âœ” í•˜ë‹¨ ë²„íŠ¼ â†’ ì¹´ì¹´ì˜¤ë§µ ê²½ë¡œ ë”°ë¼ê°€ê¸°
</div>

<h2>ğŸŒ ìš”êµ¬ì¡°ì ìœ„ì¹˜ì¢Œí‘œ ì…ë ¥</h2>

<input type="number" step="any" inputmode="decimal"
       id="otherLatitude" class="ui-control"
       placeholder="ëŒ€ìƒ ìœ„ë„">

<input type="number" step="any" inputmode="decimal"
       id="otherLongitude" class="ui-control"
       placeholder="ëŒ€ìƒ ê²½ë„">

<button onclick="showLocations()" class="ui-control">
ğŸ“ ëŒ€ìƒ ìœ„ì¹˜ ì§€ë„ ë³´ê¸°
</button>

<div id="distanceInfo" class="box"></div>
<div id="mapComparison" class="map"></div>

<!-- ğŸ”¥ í¬ê¸° í†µì¼ëœ í•˜ë‹¨ ë²„íŠ¼ -->
<div class="bottom-fixed">
  <button id="kakaoRoute" class="ui-control">
    ğŸ§­ ìš”êµ¬ì¡°ì ìœ„ì¹˜ ê²½ë¡œ ë”°ë¼ê°€ê¸°
  </button>
</div>

<script>
let currentLat, currentLng;
let targetLat, targetLng;

/* ë‚´ ìœ„ì¹˜ */
getLocation.onclick = () => {
  navigator.geolocation.getCurrentPosition(pos => {
    currentLat = pos.coords.latitude;
    currentLng = pos.coords.longitude;
    coord.textContent =
      `${currentLat.toFixed(6)} / ${currentLng.toFixed(6)}`;
  }, () => alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
};

/* ê²½ë¡œ ë”°ë¼ê°€ê¸° */
kakaoRoute.onclick = () => {
  if (!targetLat || !targetLng) {
    alert("ëŒ€ìƒ ìœ„ì¹˜ë¥¼ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”.");
    return;
  }
  location.href =
    `kakaomap://route?ep=${targetLat},${targetLng}&by=FOOT`;
};

/* ëŒ€ìƒ ìœ„ì¹˜ í‘œì‹œ */
function showLocations() {
  targetLat = parseFloat(otherLatitude.value);
  targetLng = parseFloat(otherLongitude.value);

  if (!currentLat || !currentLng || isNaN(targetLat) || isNaN(targetLng)) {
    alert("ì¢Œí‘œë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  const map = new kakao.maps.Map(mapComparison, {
    center: new kakao.maps.LatLng(targetLat, targetLng),
    level: 7
  });

  const myPos = new kakao.maps.LatLng(currentLat, currentLng);
  const otherPos = new kakao.maps.LatLng(targetLat, targetLng);

  new kakao.maps.Marker({ position: myPos, map });
  new kakao.maps.Marker({ position: otherPos, map });

  const line = new kakao.maps.Polyline({ path: [myPos, otherPos] });
  const distance = line.getLength();

  distanceInfo.textContent =
    `ì§ì„ ê±°ë¦¬: ${(distance / 1000).toFixed(2)} km`;
}
</script>

</body>
</html>
